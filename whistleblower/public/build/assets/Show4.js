import{d as p,T as B,o as a,e as c,h as $,a as e,t as u,b as f,n as W,y as D,z as H,x as Q,l as T,A as X,u as v,f as K,i as k,F as A,g as z,c as O,E as me,w as E,j as G,H as _e,I as fe,q as U}from"./app.js";import{_ as he}from"./AppLayout.js";import{_ as ge}from"./ArticleBlock.js";import{C}from"./index14.js";import{_ as P}from"./_plugin-vue_export-helper.js";import{_ as Z}from"./DateFormat.js";import{_ as R}from"./Text.js";import{_ as q,I as ye}from"./File.js";import{_ as ve}from"./PrimaryButton.js";import"./LanguageSwitcher.js";const F=p(!1);function xe(r){if(F.value){let t=J(F.value);if(r&&t)return C.AES.encrypt(r,t).toString()}return null}function be(r){if(F.value){let t=J(F.value);try{return C.AES.decrypt(r,t).toString(C.enc.Utf8)}catch{return C.AES.decrypt(r,t).toString(C.enc.Latin1)}}return null}function we(){return F.value?J(F.value):null}function J(r){if(typeof r.whistleblower.company_public_key<"u"&&typeof r.companies.rsa_key<"u"){let t=ke(r.companies.rsa_key);try{return C.AES.decrypt(r.whistleblower.company_public_key,t).toString(C.enc.Utf8)}catch{return C.AES.decrypt(r.whistleblower.company_public_key,t).toString(C.enc.Latin1)}}}function ke(r){const t="-----BEGIN PUBLIC KEY-----",i="-----END PUBLIC KEY-----";return r.substring(t.length,r.length-i.length)}function $e(r){return F.value=r}const Ce={methods:{setOccurrence:$e,encrypt:xe,decrypt:be,aesKey:we}};function Se(r,t,i,h,y,l){return null}const M=P(Ce,[["render",Se]]);const Ae=r=>(D("data-v-8c1fe45a"),r=r(),H(),r),ze=["id"],Te={class:"mb-4"},Fe={class:"text-gray-800 dark:text-gray-100 text-sm"},Ee={class:"flex items-center w-full text-gray-800 dark:text-gray-100"},Me={class:"flex flex-wrap w-full items-start justify-between"},Ve={class:"flex items-center"},Be={class:"inline-flex items-center mr-2 text-sm text-gray-900 dark:text-white"},Ne=["src","alt"],Ie={class:"flex flex-col ml-2"},Le={class:"text-sm font-semibold"},je={class:"text-xs text-gray-400"},Ue={class:"text-sm flex flex-wrap gap-1 items-center text-gray-500"},Oe=Ae(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-pencil",width:"20",height:"20",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z"}),e("path",{d:"M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"}),e("line",{x1:"13.5",y1:"6.5",x2:"17.5",y2:"10.5"})],-1)),Pe=[Oe],Ge={__name:"CardNote",props:{id:p(0),text:p(""),created_at:p(""),active:p(""),user:Array},setup(r){const t=r,i=B({id:t.id}),h=d=>d?d.profile_photo_url:"https://ui-avatars.com/api/?name=N+O&color=7F9CF5&background=EBF4FF";function y(d){d&&confirm("Are you sure you want to Delete")&&i.delete(route("note.destroy",d))}const l=d=>d===t.active;return(d,x)=>(a(),c("div",{id:"section-"+t.id,class:W([{"border-emerald-700":l(t.id),"border-gray-200":!l(t.id)},"w-full relative h-auto flex flex-col justify-between dark:bg-gray-800 bg-white dark:border-gray-700 rounded-lg border py-5 px-4 w-full shadow-md"])},[d.$page.props.user.permissions.includes("delete-notes")?(a(),c("a",{key:0,class:"cursor-pointer note-close",onClick:x[0]||(x[0]=w=>y(t.id))})):$("",!0),e("div",Te,[e("p",Fe,u(t.text),1)]),e("div",Ee,[e("div",Me,[e("div",Ve,[e("span",Be,[e("img",{class:"w-6 h-6 rounded-full",src:h(t.user),alt:t.user.name},null,8,Ne)]),e("div",Ie,[e("span",Le,u(t.user.name),1),e("span",je,[f(Z,{date:t.created_at,hasTime:!1},null,8,["date"])])])]),e("div",Ue,[d.$page.props.user.permissions.includes("update-notes")?(a(),c("button",{key:0,onClick:x[1]||(x[1]=w=>{d.$emit("editNote",t.id)}),class:"w-8 h-8 rounded-full bg-emerald-600 dark:bg-gray-100 dark:text-gray-800 text-white flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"edit note",role:"button"},Pe)):$("",!0)])])])],10,ze))}},Re=P(Ge,[["__scopeId","data-v-8c1fe45a"]]),De={class:"w-full flex gap-5 flex-col items-center"},He={key:0,class:"w-full bg-white p-8 rounded-lg shadow-md"},Ke=["onSubmit"],Je={class:"mb-6"},Ye={for:"postContent",class:"block text-gray-700 text-sm font-bold mb-2"},qe=["placeholder"],We={class:"flex items-center justify-between"},Qe={type:"submit",class:"flex justify-center items-center bg-blue-500 hover:bg-blue-600 focus:outline-none focus:shadow-outline-blue text-white py-2 px-4 rounded-md transition duration-300 gap-2"},Xe=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 24 24",id:"send",fill:"#fff"},[e("path",{fill:"none",d:"M0 0h24v24H0V0z"}),e("path",{d:"M3.4 20.4l17.45-7.48c.81-.35.81-1.49 0-1.84L3.4 3.6c-.66-.29-1.39.2-1.39.91L2 9.12c0 .5.37.93.87.99L17 12 2.87 13.88c-.5.07-.87.5-.87 1l.01 4.61c0 .71.73 1.2 1.39.91z"})],-1),Ze=["onClick"],et={__name:"Note",props:{occurrence:Array,notes:Array},setup(r){const t=r;Q(()=>{M.methods.setOccurrence(t.occurrence)});const i=B({id:"",note:"",text:"",occurrence_id:t.occurrence.id}),h=()=>{i.text=l(i.note),i.post(route("note.store")),i.reset()},y=p(null);function l(m){return m?M.methods.encrypt(m):null}function d(m){return m?M.methods.decrypt(m):null}const x=m=>{let S=t.notes.find(g=>g.id===m);Object.keys(S).length&&(i.note=d(S.text),i.id=S.id,y.value.focus())},w=()=>{i.id="",i.note=""};return(m,S)=>(a(),c("div",De,[m.$page.props.user.permissions.includes("create-notes")?(a(),c("div",He,[e("form",{onSubmit:k(h,["prevent"])},[e("div",Je,[e("label",Ye,u(m.$t("Internal notes"))+" :",1),T(e("textarea",{name:"note",ref_key:"noteTextArea",ref:y,"onUpdate:modelValue":S[0]||(S[0]=g=>v(i).note=g),rows:"4",class:"w-full border-2 rounded-md px-4 py-2 leading-5 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500",placeholder:m.$t("Write note")},null,8,qe),[[X,v(i).note]])]),e("div",We,[e("button",Qe,[K(u(m.$t("Save"))+" ",1),Xe]),e("button",{type:"reset",class:"bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-600 dark:focus:ring-gray-700 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:text-white focus:outline-none focus:ring-4 focus:ring-gray-200 font-medium hover:bg-gray-100 px-4 py-2 rounded-lg text-gray-900 text-sm",onClick:k(w,["prevent"])},u(m.$t("Abort")),9,Ze)])],40,Ke)])):$("",!0),m.$page.props.user.permissions.includes("view-notes")?(a(!0),c(A,{key:1},z(t.notes,(g,N)=>(a(),O(Re,{key:N,value:N,id:g.id,active:v(i).id,text:d(g.text),created_at:g.created_at,user:g.user,onEditNote:x},null,8,["value","id","active","text","created_at","user"]))),128)):$("",!0)]))}},tt={class:"flex"},st={__name:"User-select",props:{value:{type:Array},options:{type:Array},button:{type:String,default:"Confirm"}},setup(r){const t=r,i=({name:l,email:d})=>`${l} â€“ ${d}`,h=p(t.value),y=l=>{const d={name:l,code:l.substring(0,2)+Math.floor(Math.random()*1e7)};h.push(d)};return(l,d)=>{const x=me("multiselect");return a(),c("div",tt,[f(x,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=w=>h.value=w),"tag-placeholder":"Add this as new user",placeholder:"Search or add a user",label:"name","track-by":"id",options:t.options,"custom-label":i,multiple:!0,taggable:!0,onTag:y},null,8,["modelValue","options"]),f(ve,{class:"ml-3",onClick:d[1]||(d[1]=k(w=>l.$emit("assignmentUpdate",{data:h.value}),["prevent"]))},{default:E(()=>[K(u(r.button),1)]),_:1})])}}};const ot=r=>(D("data-v-8f2e038c"),r=r(),H(),r),rt={class:"flex items-center"},nt={class:"w-10 flex items-center justify-center"},at=["src"],lt={class:"w-48 ml-2 flex flex-col"},ct={class:"text-sm text-gray-700 font-bold truncate"},it={class:"text-gray-500 text-xs"},dt=ot(()=>e("div",{class:"w-6 flex items-center justify-center",title:"View"},[e("i",{class:"fas fa-edit opacity-75"})],-1)),ut={__name:"Thumbnail",props:{email:p(""),name:p(""),profile_photo_url:{type:String,default:"https://ui-avatars.com/api/?name=N+o&color=7F9CF5&background=EBF4FF"}},setup(r){const t=r;return(i,h)=>(a(),c("div",rt,[e("div",nt,[e("img",{src:t.profile_photo_url,alt:"",class:"img-decrypted"},null,8,at)]),e("div",lt,[e("span",ct,u(t.name),1),e("span",it,u(i.$t("Email"))+" : "+u(t.email),1)]),dt]))}},pt=P(ut,[["__scopeId","data-v-8f2e038c"]]);const b=r=>(D("data-v-978f5460"),r=r(),H(),r),mt={class:"flex flex-wrap mt-4"},_t={class:"w-full mb-12 px-4"},ft={class:"rounded-t mb-0 px-4 py-3 border-0"},ht={class:"flex flex-wrap items-center"},gt={class:"w-full flex overflow-x-auto custom-scrollbar"},yt={class:"flex-1 px-2"},vt={class:"h-16 flex items-center justify-between"},xt={class:"flex items-center"},bt=b(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1)),wt={class:"text-sm font-bold"},kt=b(()=>e("div",{class:"flex items-center"},null,-1)),$t={class:"px-2 flex items-center space-x-4"},Ct={class:"flex items-center space-x-2"},St=["title"],At=b(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),zt=[At],Tt=["title"],Ft=b(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),Et=[Ft],Mt=["title"],Vt=b(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),Bt=[Vt],Nt=["title"],It=b(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),Lt=[It],jt={class:"flex w-full"},Ut={class:"text-lg text-gray-800 font-bold pb-2 mb-4 border-b-2 w-full"},Ot={class:"flex flex-wrap"},Pt={class:"w-full xl:w-8/12 xl:pr-4"},Gt={class:"mb-6"},Rt={class:"flex flex-wrap items-start justify-between mb-2"},Dt={class:"flex items-center"},Ht=b(()=>e("i",{class:"fas fa-user-secret mr-2 text-lg text-blueGray-400 rounded-full w-8 h-8 border border-gray-500 text-center"},null,-1)),Kt={class:"flex flex-col ml-2"},Jt={class:"text-sm font-semibold"},Yt={key:0,class:"text-xs text-gray-400"},qt={class:"text-sm flex flex-wrap gap-1 items-center text-gray-500"},Wt={class:"mr-2"},Qt=b(()=>e("div",{id:"alert-message",class:"bg-emerald-500 duration-300 ease-in-out ease-linear hidden my-2 p-3 rounded shadow text-white transform transition-all transition-opacity transition"},null,-1)),Xt={class:"py-6 pl-2 text-gray-700"},Zt={class:"border-t-2 flex space-x-4 py-4"},es={class:"max-w-100-px"},ts=b(()=>e("label",{for:"upload-file",class:"w-16 flex items-center py-2.5 px-2 border-2 border-gray-300 rounded-lg hover:bg-gray-200 cursor-pointer"},[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),e("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),e("g",{id:"SVGRepo_iconCarrier"},[e("path",{d:"M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),e("path",{d:"M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})])])],-1)),ss={class:"w-auto flex flex-wrap gap-1"},os={key:0,class:"flex items-center"},rs={key:1,class:"flex items-center"},ns={key:2,class:"items-center"},as={class:"border-t-2 flex space-x-4 py-4 w-full"},ls={class:"max-w-100-px"},cs=b(()=>e("svg",{height:"44px",width:"44px",fill:"#000000",viewBox:"0 -64 640 640",xmlns:"http://www.w3.org/2000/svg"},[e("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),e("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),e("g",{id:"SVGRepo_iconCarrier"},[e("path",{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"})])],-1)),is=[cs],ds={class:"flex flex-col w-full"},us={class:"w-auto flex flex-wrap gap-1"},ps={class:"w-full flex items-center mt-3 py-2.5 px-2 border-2 border-emerald-700 rounded-lg hover:bg-gray-200"},ms={class:"items-center w-full"},_s={class:"mt-8 flex items-center flex-col"},fs={class:"max-w-4xl w-full mx-auto"},hs=["onSubmit"],gs={class:"flex-auto w-full"},ys={class:"flex flex-wrap"},vs={class:"relative w-full mb-3"},xs={class:"block uppercase text-blueGray-600 text-xs font-bold mb-2",for:"comment"},bs={key:0,class:"text-red-600"},ws=["disabled"],ks=["onClick"],$s={class:"max-w-4xl w-full mx-auto px-4"},Cs={class:"w-full"},Ss={class:"flex flex-col gap-2 w-full xl:w-4/12"},As={class:"w-full bg-white p-8 rounded-lg shadow-md"},zs={class:"mb-6"},Ts={for:"postContent",class:"block text-gray-700 text-sm font-bold mb-2"},Fs=["value","onChange"],Es=["value"],Ms={key:0,class:"mb-6"},Vs={for:"postContent",class:"block text-gray-700 text-sm font-bold mb-2"},Bs=["value","onChange"],Ns=["value"],Is={class:"mb-6"},Ls={for:"postContent",class:"block text-gray-700 text-sm font-bold mb-2"},js=["value","onChange"],Us=["value"],Os={class:"mb-6"},Ps={for:"postContent",class:"block text-gray-700 text-sm font-bold mb-2"},Gs=["value","onChange"],Rs=["value"],Ds={class:"w-full text-sm flex flex-col items-center text-gray-500"},Hs={__name:"Show",props:{comments:Array,notes:Array,color:{default:"light",validator:function(r){return["light","dark"].indexOf(r)!==-1}},occurrence:Object,next_page:Number,previous:Number,status_types:Array,severity_types:Array,assign_users:Array,assign_users_selected:Array,categories:Array,departments:Array},setup(r){const t=r;Q(()=>{M.methods.setOccurrence(t.occurrence)});const i=p(t.occurrence.status),h=p(t.occurrence.category_id),y=p(t.occurrence.department_id),l=B({id:t.occurrence.id,comment:"",comment_id:"",occurrence:t.occurrence,email:t.occurrence.email?L(t.occurrence.email):"",status:p("")}),d=()=>{l.comment=Y(l.comment),l.post(route("occurrences.post.comment")),l.reset()},x=()=>{l.comment_id="",l.comment=""},w=p(null),m=s=>{let n=t.comments.find(o=>o.id===s);Object.keys(n).length&&(l.comment=L(n.text),l.comment_id=n.id,w.value.focus())},S=async()=>{let s={id:l.id,status:i.value,occurrence:t.occurrence,email:t.occurrence.email?L(t.occurrence.email):""};await I(route("occurrences.post.status"),s)},g=p(t.occurrence.severity),N=async()=>{let s={id:l.id,severity:g.value,occurrence:t.occurrence};await I(route("occurrences.post.severity"),s)},ee=async()=>{let s={id:l.id,category_id:h.value};await I(route("occurrences.post.category"),s)},te=async()=>{let s={id:l.id,department_id:y.value};await I(route("occurrences.post.department"),s)},I=async(s,n)=>{await axios({method:"post",url:s,data:n}).then(function(o){if(o.status===200){const _=document.getElementById("alert-message");return _.innerHTML=o.data.message,_.style.display="block",setTimeout(()=>{_.style.display="none"},2e3),o.data}}).catch(function(o){console.log(o.toJSON())})},se=s=>s?s.profile_photo_url:"https://ui-avatars.com/api/?name=N+O&color=7F9CF5&background=EBF4FF",oe=(s,n)=>s?s.name:n("Anonymous User");function Y(s){return s?M.methods.encrypt(s):null}function L(s){return s?M.methods.decrypt(s):null}const re=p(!0),ne=async s=>{if(s){if(le(s.type)===!1)return;let n=await ce(s),o={file_name:s.name,mime_type:s.type,data_base64:n,size:s.size},_=JSON.stringify(o);try{await ae(_)}catch(j){console.log(j)}}},ae=async s=>{const n=B({id:t.occurrence.id,file:s});n.post(route("occurrences.post.files"),{onSuccess:async o=>{},onError:async()=>console.log(n.errors)})},le=s=>["image/jpeg","image/png","image/gif","image/svg+xml","text/plain","application/pdf"].includes(s)?!0:(alert("File type not allowed. Please select a different file."),re.value=!1);async function ce(s){return new Promise((n,o)=>{const _=new FileReader;_.onload=function(j){const ue=j.target.result,pe=Y(ue);n(pe)},_.readAsDataURL(s)})}const V=p(!1),ie=async s=>{await de(s.data)};async function de(s){const n=B({id:t.occurrence.id,users:s,status:!0});n.post(route("occurrences.post.assignment.users"),{onSuccess:async o=>{},onError:async()=>console.log(n.errors)})}return(s,n)=>(a(),O(he,{title:"View Companies"},{default:E(()=>[e("div",mt,[e("div",_t,[e("div",{class:W([[r.color==="light"?"bg-white":"bg-emerald-900 text-white"],"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded"])},[e("div",ft,[e("div",ht,[e("div",gt,[e("div",yt,[e("div",vt,[e("div",xt,[f(v(G),{class:"flex items-center text-gray-700 px-2 py-1 space-x-0.5 border border-gray-300 rounded-lg shadow hover:bg-gray-200 transition duration-100",title:"Back",href:s.route("occurrences.index")},{default:E(()=>[bt,e("span",wt,u(s.$t("Back")),1)]),_:1},8,["href"]),kt]),e("div",$t,[e("div",Ct,[t.previous>0?(a(),O(v(G),{key:0,href:s.route("occurrences.show",t.previous)},{default:E(()=>[e("button",{class:"bg-gray-200 hover:bg-gray-300 text-gray-700 p-1.5 rounded-lg transition duration-150",title:s.$t("Previous")},zt,8,St)]),_:1},8,["href"])):(a(),c("button",{key:1,class:"bg-gray-200 text-gray-400 p-1.5 rounded-lg cursor-not-allowed",title:s.$t("Previous")},Et,8,Tt)),t.next_page>0?(a(),O(v(G),{key:2,href:s.route("occurrences.show",t.next_page)},{default:E(()=>[e("button",{class:"bg-gray-200 hover:bg-gray-300 text-gray-700 p-1.5 rounded-lg transition duration-150",title:s.$t("Next")},Bt,8,Mt)]),_:1},8,["href"])):(a(),c("button",{key:3,class:"bg-gray-200 text-gray-400 p-1.5 rounded-lg cursor-not-allowed",title:s.$t("Next")},Lt,8,Nt))])])]),e("div",jt,[e("h4",Ut,[f(R,{occurrences:t.occurrence,encryptedText:t.occurrence.topic},null,8,["occurrences","encryptedText"])])]),e("div",Ot,[e("div",Pt,[e("div",Gt,[e("div",Rt,[e("div",Dt,[Ht,e("div",Kt,[e("span",Jt,u(t.occurrence.classification),1),t.occurrence.email?(a(),c("span",Yt,[K(u(s.$t("From"))+": ",1),f(R,{occurrences:t.occurrence,encryptedText:t.occurrence.email},null,8,["occurrences","encryptedText"])])):$("",!0)])]),e("div",qt,[e("span",Wt,[f(Z,{date:t.occurrence.created_at,hasTime:"true"},null,8,["date"])])])]),Qt,e("div",Xt,[f(R,{occurrences:t.occurrence,encryptedText:t.occurrence.description},null,8,["occurrences","encryptedText"])]),e("div",Zt,[e("div",es,[ts,e("input",{type:"file",id:"upload-file",name:"file",class:"hidden",onInput:n[0]||(n[0]=o=>ne(o.target.files[0]??""))},null,32)]),e("div",ss,[t.occurrence.files.length>0?(a(!0),c(A,{key:0},z(t.occurrence.files,(o,_)=>(a(),c("div",{class:"w-70 flex items-center py-2.5 px-2 border-2 border-gray-300 rounded-lg hover:bg-gray-200",key:_},[o.mime_type==="text/plain"?(a(),c("div",os,[f(q,{occurrences:t.occurrence,encryptedText:o.data_base64,type:1,name:o.file_name,size:o.size,user:o.user},null,8,["occurrences","encryptedText","name","size","user"])])):o.mime_type==="application/pdf"?(a(),c("div",rs,[f(q,{occurrences:t.occurrence,encryptedText:o.data_base64,type:1,name:o.file_name,size:o.size,user:o.user},null,8,["occurrences","encryptedText","name","size","user"])])):(a(),c("div",ns,[f(ye,{occurrences:t.occurrence,type:1,name:o.file_name,size:o.size,encryptedText:o.data_base64,user:o.user},null,8,["occurrences","name","size","encryptedText","user"])]))]))),128)):$("",!0)])]),e("div",as,[e("div",ls,[e("div",{onClick:n[1]||(n[1]=o=>V.value=!V.value),class:"w-16 flex items-center py-2.5 px-2 border-2 border-gray-300 rounded-lg hover:bg-gray-200 cursor-pointer"},is)]),e("div",ds,[e("div",us,[t.assign_users_selected.length>0?(a(!0),c(A,{key:0},z(t.assign_users_selected,(o,_)=>(a(),c("div",{class:"w-70 flex items-center py-2.5 px-2 border-2 border-gray-300 rounded-lg hover:bg-gray-200",key:_},[e("div",{class:"flex items-center cursor-pointer",onClick:n[2]||(n[2]=j=>V.value=!V.value)},[f(pt,{email:o.email,name:o.name,profile_photo_url:o.profile_photo_url},null,8,["email","name","profile_photo_url"])])]))),128)):$("",!0)]),f(fe,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:E(()=>[T(e("div",ps,[e("div",ms,[f(st,{options:t.assign_users,value:t.assign_users_selected,onAssignmentUpdate:ie},null,8,["options","value"])])],512),[[_e,V.value]])]),_:1})])]),e("div",_s,[e("div",fs,[e("form",{onSubmit:k(d,["prevent"])},[e("div",gs,[e("div",ys,[e("div",vs,[e("label",xs,u(s.$t("Comment(s)")),1),T(e("textarea",{type:"text",class:"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150",rows:"6",name:"comment",ref_key:"commentTextArea",ref:w,"onUpdate:modelValue":n[3]||(n[3]=o=>v(l).comment=o)},null,512),[[X,v(l).comment]]),v(l).errors.comment?(a(),c("span",bs,u(s.$t(v(l).errors.comment)),1)):$("",!0)]),e("button",{disabled:v(l).processing,class:"bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 ease-linear transition-all duration-150",type:"submit"},u(s.$t("Post comment")),9,ws),e("button",{type:"reset",class:"bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-600 dark:focus:ring-gray-700 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:text-white focus:outline-none focus:ring-4 focus:ring-gray-200 font-medium hover:bg-gray-100 px-4 py-2 rounded-lg text-gray-900 text-sm",onClick:k(x,["prevent"])},u(s.$t("Abort")),9,ks)])])],40,hs)]),e("div",$s,[(a(!0),c(A,null,z(t.comments,(o,_)=>(a(),c("div",Cs,[f(ge,{id:o.id,name:oe(o.user,s.$t),date:o.created_at,content:L(o.text),profile_img:se(o.user),onEditComment:m,user_id:o.user_id},null,8,["id","name","date","content","profile_img","user_id"])]))),256))])])])]),e("div",Ss,[e("div",As,[e("form",null,[e("div",zs,[e("label",Ts,u(s.$t("Category"))+" :",1),T(e("select",{"onUpdate:modelValue":n[4]||(n[4]=o=>h.value=o),name:"category",id:"category",value:h.value,onChange:k(ee,["prevent"]),class:"w-full border-2 rounded-md px-4 py-2 leading-5 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500"},[(a(!0),c(A,null,z(t.categories,o=>(a(),c("option",{value:o.id},u(s.$t(o.name)),9,Es))),256))],40,Fs),[[U,h.value]])]),t.occurrence.departments?(a(),c("div",Ms,[e("label",Vs,u(s.$t("Department"))+" :",1),T(e("select",{"onUpdate:modelValue":n[5]||(n[5]=o=>y.value=o),name:"department",id:"department",value:y.value,onChange:k(te,["prevent"]),class:"w-full border-2 rounded-md px-4 py-2 leading-5 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500"},[(a(!0),c(A,null,z(t.departments,o=>(a(),c("option",{value:o.id},u(s.$t(o.name)),9,Ns))),256))],40,Bs),[[U,y.value]])])):$("",!0),e("div",Is,[e("label",Ls,u(s.$t("Status"))+" :",1),T(e("select",{"onUpdate:modelValue":n[6]||(n[6]=o=>i.value=o),name:"status",id:"status",value:i.value,onChange:k(S,["prevent"]),class:"w-full border-2 rounded-md px-4 py-2 leading-5 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500"},[(a(!0),c(A,null,z(t.status_types,o=>(a(),c("option",{value:o},u(s.$t(o)),9,Us))),256))],40,js),[[U,i.value]])]),e("div",Os,[e("label",Ps,u(s.$t("Severity"))+" :",1),T(e("select",{"onUpdate:modelValue":n[7]||(n[7]=o=>g.value=o),name:"severity",id:"severity",value:g.value,onChange:k(N,["prevent"]),class:"w-full border-2 rounded-md px-4 py-2 leading-5 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500"},[(a(!0),c(A,null,z(t.severity_types,(o,_)=>(a(),c("option",{key:_,value:_},u(s.$t(o)),9,Rs))),128))],40,Gs),[[U,g.value]])])])]),e("div",Ds,[f(et,{occurrence:t.occurrence,notes:t.notes},null,8,["occurrence","notes"])])])])])])])])],2)])])]),_:1}))}},so=P(Hs,[["__scopeId","data-v-978f5460"]]);export{so as default};
