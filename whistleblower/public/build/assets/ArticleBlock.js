import{c as b}from"./AppLayout.js";import{k as _,d as v,T as w,o as d,e as l,a as t,f as k,t as n,b as x,h as u,u as D,n as C}from"./app.js";import{_ as $}from"./DateFormat.js";import"./index14.js";const B={class:"p-6 text-base bg-white border-b border-gray-200 dark:border-gray-700 dark:bg-gray-900"},N={class:"flex justify-between items-center mb-2"},S={class:"flex flex-wrap items-center"},z={class:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white"},A=["src","alt"],R={class:"text-sm text-gray-600 dark:text-gray-400"},V=["datetime","title"],M=t("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})],-1),T={class:"sr-only"},E=["id"],j={class:"py-1 text-sm text-gray-700 dark:text-gray-200"},P={key:0},q={key:1},F={class:"text-gray-500 dark:text-gray-400"},K={__name:"ArticleBlock",props:{id:Number,name:String,date:String,user_id:Number,content:{type:String,default:""},profile_img:String},setup(c){const r=c,m=_(()=>"dropdownComment-"+r.id),o=v(!1),g=(e,s)=>{e.preventDefault(),o.value=!o.value,b(s.btnDropdownRef,s.popoverDropdownRef,{placement:"bottom-start"})},f=e=>{e.preventDefault(),o.value=!o.value},p=w({id:r.id});function y(e){e&&confirm("Are you sure you want to Delete")&&(p.id=e,p.delete(route("occurrences.delete.comment"))),o.value=!o.value}const a=(e,s)=>Array.isArray(e)?!!e.includes(s):!1,h=e=>!!(e.props.user.id===r.user_id&&a(e.props.user.permissions,"update-notes")||e.props.user.id===r.user_id||a(e.props.user.permissions,"delete-notes"));return(e,s)=>(d(),l("article",B,[t("div",N,[t("div",S,[t("p",z,[t("img",{class:"mr-2 w-6 h-6 rounded-full",src:r.profile_img,alt:r.name},null,8,A),k(n(r.name),1)]),t("p",R,[t("time",{pubdate:"",datetime:r.date,title:r.date},[x($,{date:r.date,hasTime:"true"},null,8,["date"])],8,V)])]),h(e.$page)?(d(),l("button",{key:0,id:"dropdownComment1Button",onClick:s[0]||(s[0]=i=>g(i,e.$refs)),ref:"btnDropdownRef",class:"inline-flex items-center p-2 text-sm font-medium text-center text-gray-400 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-50 dark:bg-gray-900 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button"},[M,t("span",T,n(e.$t("Comment settings")),1)],512)):u("",!0),t("div",{id:D(m),ref:"popoverDropdownRef",class:C(["bg-white text-base z-50 float-left py-2 list-none text-left rounded shadow-lg min-w-48",{hidden:!o.value,block:o.value}])},[t("ul",j,[e.$page.props.user.id===r.user_id&&a(e.$page.props.user.permissions,"update-notes")?(d(),l("li",P,[t("form",null,[t("a",{href:"#",onClick:s[1]||(s[1]=i=>{e.$emit("editComment",r.id),f(i)}),class:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},n(e.$t("Edit")),1)])])):u("",!0),e.$page.props.user.id===r.user_id||a(e.$page.props.user.permissions,"delete-notes")?(d(),l("li",q,[t("form",null,[t("a",{href:"#",onClick:s[2]||(s[2]=i=>y(r.id)),class:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},n(e.$t("Remove")),1)])])):u("",!0)])],10,E)]),t("p",F,n(r.content),1)]))}};export{K as _};
